{
  "name": "Scaffold 6 Longranger Freebayes Polish 2019-Jun-13",
  "title": "Scaffold 6 Freebayes Polish",
  "stages": [
    {
      "id": "first_refprep",
      "executable": "app-10x_longranger_mkref/2.2.2",
      "folder": "longranger_freebayes_round_1/10x_longranger"
    },
    {
      "id": "first_map",
      "executable": "app-10x_longranger_align/2.2.2",
      "folder": "longranger_freebayes_round_1/10x_longranger",
      "input": {
        "output_prefix": "longranger_round1",
        "ref": {
          "$dnanexus_link": {
            "outputField": "ref_targz",
            "stage": "first_refprep"
          }
        }
      },
      "systemRequirements": {
        "*": {
          "instanceType": "mem1_ssd2_x36"
        }
      }
    },
    {
      "id": "first_freebayes",
      "executable": "applet-FZ0vYp80j3bJKb88FbZqqpQ3",
      "folder": "longranger_freebayes_round_1/freebayes",
      "input": {
        "bam": {
          "$dnanexus_link": {
            "outputField": "sorted_bam",
            "stage": "first_map"
          }
        },
        "bai": {
          "$dnanexus_link": {
            "outputField": "sorted_bam_index",
            "stage": "first_map"
          }
        },
        "ref": {
          "$dnanexus_link": {
            "inputField": "ref_fasta",
            "stage": "first_refprep"
          }
        }
      }
    },
    {
      "id": "second_refprep",
      "executable": "app-10x_longranger_mkref/2.2.2",
      "folder": "longranger_freebayes_round_2/10x_longranger",
      "input": {
        "ref_fasta": {
          "$dnanexus_link": {
            "outputField": "pl_fasta",
            "stage": "first_freebayes"
          }
        }
      }
    },
    {
      "id": "second_map",
      "executable": "app-10x_longranger_align/2.2.2",
      "folder": "longranger_freebayes_round_2/10x_longranger",
      "input": {
        "ref": {
          "$dnanexus_link": {
            "outputField": "ref_targz",
            "stage": "second_refprep"
          }
        },
        "output_prefix": "longranger_round2",
        "fastq_tars": [
          {
            "$dnanexus_link": {
              "inputField": "fastq_tars",
              "stage": "first_map"
            }
          }
        ]
      },
      "systemRequirements": {
        "*": {
          "instanceType": "mem1_ssd2_x36"
        }
      }
    },
    {
      "id": "second_freebayes",
      "executable": "applet-FZ0vYp80j3bJKb88FbZqqpQ3",
      "folder": "longranger_freebayes_round_2/freebayes",
      "input": {
        "bam": {
          "$dnanexus_link": {
            "outputField": "sorted_bam",
            "stage": "second_map"
          }
        },
        "bai": {
          "$dnanexus_link": {
            "outputField": "sorted_bam_index",
            "stage": "second_map"
          }
        },
        "ref": {
          "$dnanexus_link": {
            "outputField": "pl_fasta",
            "stage": "first_freebayes"
          }
        }
      }
    },
    {
      "id": "stage-FYj6yBQ0j3b9VfPj4qF37KxG",
      "executable": "applet-FYfpX9Q0x9YP1y1qKzQZbXYq",
      "folder": "longranger_freebayes_round_2/stats",
      "input": {
        "out_name": "output",
        "asm": {
          "$dnanexus_link": {
            "outputField": "pl_fasta",
            "stage": "second_freebayes"
          }
        },
        "mode": "scaffold&contigs+haplotypes"
      },
      "systemRequirements": {
        "*": {
          "instanceType": "mem1_ssd1_x4"
        }
      }
    },
    {
      "id": "stage-FYj6yZ80j3bPZX142pVFZjy2",
      "executable": "applet-FYZ6B6Q0x9Y57jYj2kzQq7bz",
      "folder": "longranger_freebayes_round_2/QV",
      "input": {
        "VAR": {
          "$dnanexus_link": {
            "outputField": "pl_vcf_changes",
            "stage": "second_freebayes"
          }
        },
        "BAM": {
          "$dnanexus_link": {
            "outputField": "sorted_bam",
            "stage": "second_map"
          }
        }
      },
      "systemRequirements": {
        "*": {
          "instanceType": "mem1_ssd1_x4"
        }
      }
    }
  ]
}
